<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Mobile LLM Performance Analytics Dashboard</title>

  <link rel="stylesheet" href="./style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js" defer></script>
  <script src="./app.js" defer></script>
</head>
<body>
  <header class="header">
    <div class="header__title">
      <h1>Mobile LLM Performance Analytics</h1>
      <p>Analyze DVFS, thermal behavior, and token performance from exported experiment JSON files</p>
    </div>
    <div class="header__actions">
      <button id="openHostedBtn" class="btn">Browse hosted data</button>
      <button id="uploadBtn" class="btn btn--primary">Upload JSON</button>
      <input id="fileInput" type="file" accept=".json" class="visually-hidden" />
    </div>
  </header>

  <section class="notice" id="notice">
    <strong>Tip:</strong> Drop a JSON file anywhere on this page, or click Upload JSON above.
  </section>

  <main class="grid">
    <!-- Session summary -->
    <section class="card">
      <h2>Session Summary</h2>
      <div id="sessionSummary" class="summary">
        <div class="summary__row">
          <div><span class="summary__label">Session ID</span><span id="sumSessionId" class="summary__value">—</span></div>
          <div><span class="summary__label">Duration</span><span id="sumDuration" class="summary__value">—</span></div>
          <div><span class="summary__label">Inferences</span><span id="sumInferences" class="summary__value">—</span></div>
          <div><span class="summary__label">Tokens</span><span id="sumTokens" class="summary__value">—</span></div>
        </div>
      </div>
    </section>

    <!-- DVFS Frequency Over Time -->
    <section class="card">
      <div class="card__header">
        <h2>DVFS Frequency Scaling Over Time</h2>
        <p class="subhead">Average CPU frequency while generating tokens</p>
      </div>
      <canvas id="dvfsChart" height="140"></canvas>
    </section>

    <!-- CPU & Memory Over Time -->
    <section class="card">
      <div class="card__header">
        <h2>System Resource Usage</h2>
        <p class="subhead">Process CPU% and memory during token generation</p>
      </div>
      <canvas id="sysChart" height="140"></canvas>
    </section>

    <!-- Model Performance Comparison -->
    <section class="card">
      <div class="card__header">
        <h2>Model Performance</h2>
        <p class="subhead">Prefill vs Decode tokens/sec by model (if present)</p>
      </div>
      <canvas id="modelChart" height="140"></canvas>
    </section>

    <!-- Thermal Analysis -->
    <section class="card">
      <div class="card__header">
        <h2>Thermal Analysis</h2>
        <p class="subhead">Frequency drops that may indicate thermal throttling</p>
      </div>
      <canvas id="thermalChart" height="140"></canvas>
    </section>

    <!-- Token Timeline -->
    <section class="card">
      <div class="card__header">
        <h2>Token Generation Timeline</h2>
        <p class="subhead">Per-token timing vs frequency</p>
      </div>
      <canvas id="timelineChart" height="140"></canvas>
    </section>
  </main>

  <!-- Hosted datasets dialog -->
  <dialog id="hostedDialog">
    <form method="dialog" class="dialog">
      <h3>Hosted datasets</h3>
      <p>Select a JSON file from docs/data/ (add files there to make them appear).</p>
      <div id="hostedList" class="dialog__list">No hosted data found.</div>
      <div class="dialog__actions">
        <button value="cancel" class="btn">Close</button>
      </div>
    </form>
  </dialog>

  <footer class="footer">
    <div>Client-side only. No data leaves the browser.</div>
  </footer>
</body>
</html>
